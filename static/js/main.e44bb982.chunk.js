(this.webpackJsonpgeocomment=this.webpackJsonpgeocomment||[]).push([[0],{120:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),o=n.n(c),i=(n(120),n(8)),s=n(167),u=n(108),d=n(171),l=n(172),p=n(200),j=n(173),h=n(176),b=n(174),f=n(175),m=n(177),x=Object(r.createContext)({userCredentials:{email:"",userid:0,token:""},setUserCredentials:function(e){return console.warn("no context provider")}}),O=function(){return Object(r.useContext)(x)},g=n(7),v=n.n(g),y=n(12),k=n(60),w=n(89),C=n(32),T=n(90),I=n(104),S=n(105),E=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e,r){var a;return Object(k.a)(this,n),(a=t.call(this,r)).url=void 0,a.status=void 0,a.statusText=void 0,a.body=void 0,a.url=e.url,a.status=e.status,a.statusText=e.statusText,a.body=e.body,a}return n}(Object(S.a)(Error)),R={BASE:"https://api.server.test/v1",VERSION:"1.0",WITH_CREDENTIALS:!1,TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0};function A(e){return void 0!==e&&null!==e}function P(e){return"string"===typeof e}function D(e){return P(e)&&""!==e}function N(e){return e instanceof Blob}function U(e){var t=e.path.replace(/[:]/g,"_"),n="".concat(R.BASE).concat(t);return e.query?"".concat(n).concat(function(e){var t=[];return Object.keys(e).forEach((function(n){var r=e[n];A(r)&&(Array.isArray(r)?r.forEach((function(e){t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(String(e))))})):t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(String(r)))))})),t.length>0?"?".concat(t.join("&")):""}(e.query)):n}function L(e,t){return W.apply(this,arguments)}function W(){return(W=Object(y.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof n){e.next=2;break}return e.abrupt("return",n(t));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return q.apply(this,arguments)}function q(){return(q=Object(y.a)(v.a.mark((function e(t){var n,r,a,c,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t,R.TOKEN);case 2:return n=e.sent,e.next=5,L(t,R.USERNAME);case 5:return r=e.sent,e.next=8,L(t,R.PASSWORD);case 8:return a=e.sent,e.next=11,L(t,R.HEADERS);case 11:return c=e.sent,o=new Headers(Object(C.a)(Object(C.a)({Accept:"application/json"},c),t.headers)),D(n)&&(o.append("Authorization","Bearer ".concat(n)),console.log(n)),D(r)&&D(a)&&(i=btoa("".concat(r,":").concat(a)),o.append("Authorization","Basic ".concat(i))),t.body&&(N(t.body)?o.append("Content-Type",t.body.type||"application/octet-stream"):P(t.body)?o.append("Content-Type","text/plain"):o.append("Content-Type","application/json")),e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return e.formData?function(e){var t=new FormData;return Object.keys(e).forEach((function(n){var r=e[n];A(r)&&t.append(n,r)})),t}(e.formData):e.body?P(e.body)||N(e.body)?e.body:JSON.stringify(e.body):void 0}function F(e,t){return B.apply(this,arguments)}function B(){return(B=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.method,e.next=3,z(t);case 3:return e.t1=e.sent,e.t2=_(t),r={method:e.t0,headers:e.t1,body:e.t2},R.WITH_CREDENTIALS&&(r.credentials="include"),e.next=9,fetch(n,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){if(t){var n=e.headers.get(t);if(P(n))return n}return null}function M(e){return G.apply(this,arguments)}function G(){return(G=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.headers.get("Content-Type"))){e.next=13;break}if(!n.toLowerCase().startsWith("application/json")){e.next=10;break}return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,t.text();case 12:return e.abrupt("return",e.sent);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function V(e,t){var n=Object(C.a)({400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"},e.errors)[t.status];if(n)throw new E(t,n);if(!t.ok)throw new E(t,"Generic Error")}function K(e){return J.apply(this,arguments)}function J(){return(J=Object(y.a)(v.a.mark((function e(t){var n,r,a,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U(t),e.next=3,F(t,n);case 3:return r=e.sent,e.next=6,M(r);case 6:return a=e.sent,c=H(r,t.responseHeader),o={url:n,ok:r.ok,status:r.status,statusText:r.statusText,body:c||a},V(t,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){function e(){Object(k.a)(this,e)}return Object(w.a)(e,null,[{key:"getThreadsAt",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/threads",query:{lat:t,lng:n,radius:r}});case 2:return a=e.sent,e.abrupt("return",a.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getThread",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/thread/".concat(t),errors:{401:"unauthorized",404:"not found"}});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createThread",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/thread/",body:t,errors:{401:"unauthorized"}});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getThreadComments",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/thread/".concat(t,"/comments"),query:{levels:n}});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postComment",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/thread/".concat(t,"/comments"),body:n});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getComment",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/thread/".concat(t,"/comments/").concat(n),errors:{401:"unauthorized"}});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"vote",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/thread/".concat(t,"/comments/").concat(n,"/vote"),query:{vote:r}});case 2:return a=e.sent,e.abrupt("return",a.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/thread/".concat(t,"/comments/").concat(n,"/delete"),errors:{401:"unauthorized"}});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"reportComment",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/thread/".concat(t,"/comments/").concat(n,"/report"),body:r});case 2:return a=e.sent,e.abrupt("return",a.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getChildComments",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/thread/".concat(t,"/comments/").concat(n,"/children"),query:{level:r},errors:{404:"not found"}});case 2:return a=e.sent,e.abrupt("return",a.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/user/".concat(t),errors:{401:"unauthorized"}});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserComments",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/user/".concat(t,"/comments"),query:{top:n}});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMyComments",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/user/me/comments",query:{top:t}});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReports",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"GET",path:"/admin/reports",query:{all:t}});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleReport",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/admin/reports/".concat(t),query:{action:n},errors:{401:"unauthorized",404:"not found"}});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"banUser",value:function(){var e=Object(y.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/admin/ban/".concat(t),query:{time:n},body:r,errors:{401:"unauthorized"}});case 2:return a=e.sent,e.abrupt("return",a.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"login",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/login",body:t});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"register",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/register",body:t});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},{key:"uploadImage",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"POST",path:"/images/upload",body:t});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Z=n(15),Q=n(2);var Y=function(){var e=O(),t=(e.userCredentials,e.setUserCredentials),n=Object(r.useState)(""),a=Object(i.a)(n,2),c=a[0],o=a[1],x=Object(r.useState)(""),g=Object(i.a)(x,2),v=g[0],y=g[1],k=Object(s.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),w=Object(Z.f)(),C=k();return Object(Q.jsx)(u.a,{style:{width:"300px"},children:Object(Q.jsx)(d.a,{justify:"center",alignItems:"center",direction:"column",children:Object(Q.jsx)("form",{className:C.root,autoComplete:"off",onSubmit:function(e){var n;(n=e,n.preventDefault(),X.login({email:c,password:v}).then((function(e){return console.log(e),t({email:c,userid:e.userid,token:e.token}),R.WITH_CREDENTIALS=!0,R.TOKEN=e.token,!0}),(function(e){return console.log(e),!1}))).then((function(e){e&&w.push("/")}))},children:Object(Q.jsxs)(d.a,{container:!0,justify:"center",alignItems:"center",style:{padding:"10px"},children:[Object(Q.jsx)(l.a,{children:Object(Q.jsx)(p.a,{required:!0,id:"email",label:"Email",onChange:function(e){return o(e.target.value)},value:c,InputProps:{startAdornment:Object(Q.jsx)(j.a,{position:"start",children:Object(Q.jsx)(b.a,{})})}})}),Object(Q.jsx)(p.a,{required:!0,id:"password",label:"Password",type:"password",value:v,onChange:function(e){return y(e.target.value)},InputProps:{startAdornment:Object(Q.jsx)(j.a,{position:"start",children:Object(Q.jsx)(f.a,{})})}}),Object(Q.jsx)(h.a,{variant:"contained",color:"primary",endIcon:Object(Q.jsx)(m.a,{}),type:"submit",onClick:function(){return t({email:"max.mustermann@gmail.com",userid:1,token:"2dg638d3928h9283hd"})},children:"login"})]})})})})};var $=function(){var e=O(),t=e.userCredentials;return e.setUserCredentials,Object(Q.jsxs)("div",{children:[Object(Q.jsx)("h1",{children:"LoginView"}),Object(Q.jsxs)("h3",{children:["email: ",t.email]}),Object(Q.jsxs)("h3",{children:["token: ",t.token]}),Object(Q.jsx)(d.a,{container:!0,justify:"center",children:Object(Q.jsx)(Y,{})})]})},ee=n(28),te=n(180),ne=n(206),re=n(179),ae=Object(r.createContext)({location:{lat:0,lng:0},setLocation:function(e){return console.warn("no context provider")}}),ce=function(){return Object(r.useContext)(ae)},oe=n(178);function ie(){var e=Object(oe.a)(),t=ce(),n=t.location;t.setLocation;return a.a.useEffect((function(){e.flyTo(n,18)}),[n]),Object(Q.jsx)("div",{})}var se=n.p+"static/media/navigation_black_24dp.68d102d6.svg",ue=n.p+"static/media/bubble_icon_blue.7714e3ae.svg",de=n.p+"static/media/bubble_icon_red.6e131ae0.svg",le=n.p+"static/media/bubble_icon_yellow.1498be91.svg",pe=n.p+"static/media/bubble_icon_green.2dfd6c4e.svg";function je(e){var t=a.a.useState(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=a.a.useState(he(0,"red")),s=Object(i.a)(o,2),u=s[0],d=s[1],l=a.a.useState(),p=Object(i.a)(l,2),j=(p[0],p[1]),h=16;return setTimeout((function(){d(he(h,"blue")),j("HelloImaLink"),c(!0)}),1e4),Object(Q.jsx)(re.a,{position:e.thread.location,icon:u,opacity:r?1:0,eventHandlers:{click:function(e){console.log("marker clicked",e)}}})}function he(e,t){var n=-1;n=e>=25?60:e<=-5?20:20+Math.round((e- -5)/30*40);var r=ue;switch(t){case"red":r=de;break;case"green":r=pe;break;case"yellow":r=le;break;case"blue":r=ue}return new ee.Icon({iconUrl:r,iconRetinaUrl:r,iconAnchor:[Math.round(n/2),Math.round(n/2)],popupAnchor:[Math.round(n/2),0],iconSize:[n,n]})}function be(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function fe(){var e=function(){var e=Object(r.useState)(be()),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(be())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(),t=e.height,n=(e.width,a.a.useState([])),c=Object(i.a)(n,2),o=c[0],s=c[1],u=ce(),d=u.location,l=(u.setLocation,new ee.Icon({iconUrl:se,iconRetinaUrl:se,iconAnchor:[30,30],popupAnchor:[30,0],iconSize:[60,60]}));a.a.useEffect((function(){X.getThreadsAt(d.lat,d.lng,500).then((function(e){return s(e)}))}),[d]);var p=[{id:42,title:"Test Title",description:"Test Description",location:{lat:49.004172,lng:8.42198}},{id:42,title:"Test Title",description:"Test Description",location:{lat:49.008172,lng:8.42398}},{id:42,title:"Test Title",description:"Test Description",location:{lat:49.009172,lng:8.42598}},{id:42,title:"Test Title",description:"Test Description",location:{lat:49.008372,lng:8.42338}},{id:42,title:"Test Title",description:"Test Description",location:{lat:49.008072,lng:8.42308}},{id:42,title:"Test Title",description:"Test Description",location:{lat:49.008372,lng:8.42308}}];return setTimeout((function(){s(p)}),5e3),Object(Q.jsxs)(te.a,{center:d,zoom:18,scrollWheelZoom:!1,style:{height:t},zoomControl:!1,dragging:!1,children:[Object(Q.jsx)(ie,{}),Object(Q.jsx)(ne.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.map((function(e){return Object(Q.jsx)(je,{thread:e})})),Object(Q.jsx)(re.a,{position:d,icon:l})]})}var me=function(){var e=O(),t=(e.userCredentials,e.setUserCredentials,a.a.useState({lat:49.011202,lng:8.404114})),n=Object(i.a)(t,2),r=n[0],c=n[1];function o(){navigator.geolocation.getCurrentPosition((function(e){c({lat:e.coords.latitude,lng:e.coords.longitude}),console.log("Update location to lat: "+r.lat+" lng: "+r.lng)}))}return a.a.useEffect((function(){setInterval(o,5e3)}),[]),Object(Q.jsx)("div",{children:Object(Q.jsx)(ae.Provider,{value:{location:r,setLocation:c},children:Object(Q.jsx)(fe,{})})})},xe=n(182),Oe=n(204),ge=n(205),ve=n(72),ye=n(68),ke=n(71),we=n(69),Ce=n(181),Te=n(96),Ie=n.n(Te),Se=n(97),Ee=n.n(Se),Re=n(98),Ae=n.n(Re),Pe=n(99),De=n.n(Pe),Ne=n(70);function Ue(e,t){return 1!==Math.abs(e)?new Promise((function(){return!1})):X.vote(t.threadId,t.id,1===e).then((function(){return!0}),(function(){return!1}))}var Le=Object(s.a)((function(e){return Object(Oe.a)({secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},green:{backgroundColor:ye.a[900],color:ke.a[500]},red:{backgroundColor:ye.a[900],color:we.a[500]},yellow:{backgroundColor:ye.a[900],color:Ce.a[500]},lightblue:{backgroundColor:ye.a[900],color:Ne.a[400]},selected:{backgroundColor:Ne.a[400],color:ye.a[900]},grey:{backgroundColor:ye.a[900],color:ye.a[100]}})}));var We=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),s=Object(i.a)(o,2),u=s[0],d=s[1],l=Le();return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(h.a,{onClick:function(){Ue(1,e.comment).then((function(e){e&&c(!0)}))},disabled:a||u,children:Object(Q.jsx)(ge.a,{className:a?l.green:l.grey,children:Object(Q.jsx)(Ie.a,{})})}),Object(Q.jsx)(h.a,{onClick:function(){Ue(-1,e.comment).then((function(e){e&&d(!0)}))},disabled:a||u,children:Object(Q.jsx)(ge.a,{className:u?l.red:l.grey,children:Object(Q.jsx)(Ee.a,{})})}),Object(Q.jsx)(h.a,{onClick:function(){e.reportCallback(e.comment.id)},children:Object(Q.jsx)(ge.a,{className:l.yellow,children:Object(Q.jsx)(Ae.a,{})})}),Object(Q.jsx)(h.a,{onClick:function(){e.selectCallback(e.comment.id)},children:Object(Q.jsx)(ge.a,{className:!0!==e.selected?l.lightblue:l.selected,children:Object(Q.jsx)(De.a,{})})})]})},ze=Object(s.a)((function(e){return Object(Oe.a)({secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},green:{backgroundColor:ye.a[900],color:ke.a[500]},red:{backgroundColor:ye.a[900],color:we.a[500]},yellow:{backgroundColor:ye.a[900],color:Ce.a[500]},grey:{backgroundColor:ye.a[900],color:ye.a[100]},selected:{}})}));var qe=function(e){var t=ze(),n=new RegExp(/(.*)\[img:(.*)\](.*)/g).exec(e.comment.content);return Object(Q.jsx)(xe.a,{style:{width:"900px",maxWidth:"90%",padding:"10px",margin:"15px"},className:t.primary,children:Object(Q.jsxs)(d.a,{container:!0,direction:"row",children:[Object(Q.jsxs)(d.a,{item:!0,xs:2,style:{flexDirection:"column",justifyContent:"center",display:"flex"},children:[Object(Q.jsx)(ge.a,{className:t.secondary,children:e.comment.upvotes}),Object(Q.jsx)(ge.a,{className:t.red,children:e.comment.downvotes})]}),Object(Q.jsxs)(d.a,{item:!0,xs:10,style:{flexDirection:"column",justifyContent:"center",display:"flex",padding:"5px",paddingLeft:"10px"},children:[null!=n?Object(Q.jsx)("img",{src:n[2],alt:"imagePath",width:"250px",height:"250px",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"cover",paddingBottom:"20px"}}):Object(Q.jsx)("p",{}),Object(Q.jsxs)(ve.a,{variant:"body1",style:{wordWrap:"break-word"},children:[null!=n?n[1]:"",null!=n?n[3]:e.comment.content]})]}),Object(Q.jsx)(d.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"flex-end"},children:!1!==e.voteButtons&&Object(Q.jsx)(We,{comment:e.comment,reportCallback:e.reportCallback,selectCallback:e.selectCallback,selected:e.selected})})]})})},_e=Object(s.a)((function(e){return Object(Oe.a)({thread:{padding:e.spacing(1),margin:e.spacing(1),maxWidth:"1000px"}})}));var Fe=function(){var e=_e(),t=Object(r.useState)(0),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(0),s=Object(i.a)(o,2),l=(s[0],s[1]),p=Object(r.useState)(),j=Object(i.a)(p,2),h=(j[0],j[1],Object(r.useState)(!1)),b=Object(i.a)(h,2),f=(b[0],b[1]),m=Object(r.useState)([{id:1,threadId:100,parentId:0,content:"Testerhfsdgghbfsgfsidgfdhgfdsgfgsgsdgdgsdssdgdgsgdfkahevhgfghahgdakgkhdgfghfkhdagfg",upvotes:5,downvotes:5},{id:2,threadId:100,parentId:1,content:"dfsah[img:http://http.cat/201]",upvotes:5,downvotes:5},{id:3,threadId:100,parentId:1,content:"dfsah[img:http://http.cat/202]",upvotes:5,downvotes:5},{id:4,threadId:2,parentId:0,content:"dfsah[img:http://http.cat/203]",upvotes:5,downvotes:5},{id:5,threadId:100,parentId:3,content:"dfsah[img:http://http.cat/204]",upvotes:5,downvotes:5}]),x=Object(i.a)(m,2),O=x[0],g=x[1];function v(e,t){var n=e.filter((function(e){return e.parentId===t.id&&e.threadId===t.threadId}));return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(qe,{comment:t,selectCallback:function(e){c(e)},reportCallback:function(e){l(e),f(!0)},selected:t.id===a}),Object(Q.jsx)(d.a,{style:{marginLeft:"50px"},children:n.map((function(t){return v(e,t)}))})]})}return X.getThreadsAt(1,1,Number.MAX_VALUE).then((function(e){var t=[];e.forEach((function(e){t.push(X.getThreadComments(e.id))})),Promise.all(t).then((function(e){g(e.flatMap((function(e){return e})))}))})),Object(Q.jsx)("div",{children:O.filter((function(e){return 0===e.parentId})).map((function(t){return Object(Q.jsxs)(u.a,{className:e.thread,children:[Object(Q.jsxs)(ve.a,{variant:"h4",children:["Thread ",t.threadId]}),v(O,t)]})}))})},Be=Object(s.a)((function(e){return Object(Oe.a)({secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},green:{backgroundColor:ye.a[900],color:ke.a[500]},red:{backgroundColor:ye.a[900],color:we.a[500]},yellow:{backgroundColor:ye.a[900],color:Ce.a[500]}})}));var He=function(e){Be();var t={id:0,threadId:e.thread.id,parentId:0,content:e.thread.title+" "+e.thread.description,upvotes:0,downvotes:0},n=new RegExp(/(.*)\[img:(.*)\](.*)/g).exec(e.thread.description);return Object(Q.jsxs)(u.a,{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:"7px"},children:[Object(Q.jsx)(ve.a,{variant:"h4",style:{padding:"5px",wordWrap:"break-word"},children:e.thread.title}),Object(Q.jsxs)(ve.a,{variant:"body1",style:{padding:"5px",wordWrap:"break-word"},children:[null!=n?n[1]:"",null!=n?n[3]:e.thread.description]}),null!=n?Object(Q.jsx)("img",{src:n[2],alt:"imagePath",width:"250px",height:"250px",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"cover",paddingBottom:"20px"}}):Object(Q.jsx)("p",{}),Object(Q.jsxs)(d.a,{container:!0,children:[Object(Q.jsx)(d.a,{item:!0,xs:2}),Object(Q.jsx)(d.a,{item:!0,xs:8,style:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center",paddingTop:"5px"},children:Object(Q.jsx)(We,{comment:t,selectCallback:function(t){e.selectCallback(0)},reportCallback:function(t){e.reportCallback(0)},selected:e.selected})}),Object(Q.jsx)(d.a,{item:!0,xs:2})]})]})},Me=n(184),Ge=n(183),Ve=n(185),Ke=n(186),Je=n(187);var Xe=function(e){var t=Object(r.useState)(""),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(!1),j=Object(i.a)(s,2),b=j[0],f=j[1],m=Object(r.useState)({}),x=Object(i.a)(m,2),O=x[0],g=x[1],v=Object(r.useState)(!0),y=Object(i.a)(v,2),k=y[0],w=y[1];function C(){e.submit(c,k,O).then((function(e){o(""),e||f(!0)})),g({})}return Object(Q.jsx)(a.a.Fragment,{children:Object(Q.jsx)(u.a,{component:"form",children:Object(Q.jsx)("form",{onSubmit:C,style:{width:"100%"},children:Object(Q.jsx)(l.a,{style:{width:"100%"},children:Object(Q.jsxs)(d.a,{container:!0,children:[Object(Q.jsx)("input",{onChange:function(e){g(e.target.files[0]),console.log(typeof e.target.files[0])},style:{display:"none"},id:"fileUpload",type:"file"}),Object(Q.jsx)("label",{htmlFor:"fileUpload",style:{width:"10%",paddingRight:"5px"},children:Object(Q.jsx)(h.a,{component:"span",style:{},children:Object(Q.jsx)(Ge.a,{})})}),Object(Q.jsx)(p.a,{multiline:!0,style:{width:"60%",padding:"3px"},placeholder:"Input Comment",value:c,onChange:function(e){o(e.target.value),f(!1)},error:b,inputProps:{"aria-label":"input comment"}}),Object(Q.jsx)(Me.a,{onClick:function(){w(!k)},"aria-label":"submit",style:{maxWidth:"10%",display:"flex",justifyContent:"flex-end"},children:k?Object(Q.jsx)(Ve.a,{}):Object(Q.jsx)(Ke.a,{})}),Object(Q.jsx)(Me.a,{onClick:function(){C()},"aria-label":"submit",style:{maxWidth:"15%",display:"flex",justifyContent:"flex-end",paddingLeft:"5%"},children:Object(Q.jsx)(Je.a,{})})]})})})})})},Ze=n(192),Qe=n(193),Ye=n(203),$e=n(188),et=n(189),tt=n(190),nt=n(191);var rt=function(e){var t=a.a.useState(""),n=Object(i.a)(t,2),r=n[0],c=n[1],o=function(){};return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(h.a,{variant:"outlined",color:"primary",onClick:function(){},style:{display:"none"},children:"Open form dialog"}),Object(Q.jsxs)(Ye.a,{open:e.open,onClose:o,"aria-labelledby":"form-dialog-title",children:[Object(Q.jsx)($e.a,{id:"form-dialog-title",children:"Report"}),Object(Q.jsxs)(et.a,{children:[Object(Q.jsx)(tt.a,{children:"Please provide a reason for your report."}),Object(Q.jsx)(p.a,{autoFocus:!0,margin:"dense",id:"reason",value:r,onChange:function(e){return c(e.target.value)},label:"Reason",type:"text",fullWidth:!0})]}),Object(Q.jsxs)(nt.a,{children:[Object(Q.jsx)(h.a,{onClick:o,color:"primary",children:"Cancel"}),Object(Q.jsx)(h.a,{onClick:function(){e.callback(r)},color:"primary",children:"Send"})]})]})]})};function at(){return(at=Object(y.a)(v.a.mark((function e(t,n,r,a,c){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===c){e.next=9;break}return(o=new FormData).append("threadId",r.toString()),o.append("commentId",a.toString()),o.append("image",c,c.name),e.next=7,X.uploadImage(o);case 7:i=e.sent,t+="[img:"+i.url+"]";case 9:return X.postComment(r,{threadId:r,parentId:a,anonymous:n,content:t}),e.abrupt("return",new Promise((function(){return!1})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ct=function(e){var t=Object(r.useState)(0),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(0),s=Object(i.a)(o,2),u=s[0],l=s[1],p=Object(r.useState)(),j=Object(i.a)(p,2),h=j[0],b=(j[1],Object(r.useState)(!1)),f=Object(i.a)(b,2),m=f[0],x=f[1],O=Object(r.useState)([{id:1,threadId:100,parentId:0,content:"Testerhfsdgghbfsgfsidgfdhgfdsgfgsgsdgdgsdssdgdgsgdfkahevhgfghahgdakgkhdgfghfkhdagfg",upvotes:5,downvotes:5},{id:2,threadId:100,parentId:1,content:"dfsah[img:http://http.cat/201]",upvotes:5,downvotes:5},{id:3,threadId:100,parentId:1,content:"dfsah[img:http://http.cat/202]",upvotes:5,downvotes:5},{id:4,threadId:100,parentId:2,content:"dfsah[img:http://http.cat/203]",upvotes:5,downvotes:5},{id:5,threadId:100,parentId:3,content:"dfsah[img:http://http.cat/204]",upvotes:5,downvotes:5}]),g=Object(i.a)(O,2),v=g[0],y=g[1];function k(e,t){var n=e.filter((function(e){return e.parentId===t.id}));return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(qe,{comment:t,selectCallback:function(e){c(e)},reportCallback:function(e){l(e),x(!0)},selected:t.id===a}),Object(Q.jsx)(d.a,{style:{marginLeft:"50px"},children:n.map((function(t){return k(e,t)}))})]})}return X.getThreadComments(e.thread.id,3).then((function(e){y(e)})),Object(Q.jsxs)("div",{children:[Object(Q.jsx)(He,{thread:e.thread,selectCallback:function(e){c(e)},reportCallback:function(e){l(e),x(!0)},selected:0===a}),Object(Q.jsxs)("div",{children:[v.filter((function(e){return 0===e.parentId})).map((function(e){return k(v,e)})),Object(Q.jsx)("div",{style:{paddingTop:"50px"}})]}),Object(Q.jsxs)(Ze.a,{fixed:!0,children:[Object(Q.jsx)(Qe.a,{position:"fixed",style:{bottom:"0",top:"auto"},children:Object(Q.jsx)(Xe,{submit:function(t,n,r){return console.log(t,r),function(e,t,n,r,a){return at.apply(this,arguments)}(t,n,e.thread.id,a,void 0===h?null:h)}})}),m&&Object(Q.jsx)(rt,{open:m,callback:function(t){var n,r,a;n=t,r=u,a=e.thread.id,X.reportComment(a,r,{comment:{id:r,threadId:a,parentId:0,content:"",upvotes:5,downvotes:5},reason:n}),x(!1)}})]})]})},ot=n(31),it=n(103),st=n(197),ut=n(198),dt=n(102),lt=n.n(dt),pt=n(100),jt=n.n(pt),ht=n(101),bt=n.n(ht),ft=n(194),mt=n(195),xt=n(202),Ot=Object(s.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}));var gt=function(){var e=O(),t=(e.userCredentials,e.setUserCredentials),n=Object(r.useState)(""),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(""),b=Object(i.a)(s,2),f=b[0],m=b[1],x=Object(r.useState)(!1),g=Object(i.a)(x,2),v=g[0],y=g[1],k=(Ot(),Object(Z.f)());return Object(Q.jsx)(u.a,{style:{width:"300px"},children:Object(Q.jsx)(d.a,{justify:"center",alignItems:"center",direction:"column",children:Object(Q.jsx)("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault(),void X.register({email:c,password:f,private:v}).then((function(){X.login({email:c,password:f}).then((function(e){t({email:c,userid:e.id,token:e.token}),R.WITH_CREDENTIALS=!0,R.TOKEN=e.token,k.push("/")}))}),(function(e){console.log(e)}))},children:Object(Q.jsxs)(d.a,{container:!0,justify:"center",alignItems:"center",style:{padding:"10px"},children:[Object(Q.jsx)(l.a,{children:Object(Q.jsx)(p.a,{required:!0,id:"email",label:"Email",onChange:function(e){return o(e.target.value)},value:c,InputProps:{startAdornment:Object(Q.jsx)(j.a,{position:"start",children:Object(Q.jsx)(jt.a,{})})}})}),Object(Q.jsx)(p.a,{required:!0,id:"password",label:"Password",type:"password",value:f,onChange:function(e){return m(e.target.value)},InputProps:{startAdornment:Object(Q.jsx)(j.a,{position:"start",children:Object(Q.jsx)(bt.a,{})})}}),Object(Q.jsx)(ft.a,{row:!0,children:Object(Q.jsx)(mt.a,{label:"private",control:Object(Q.jsx)(xt.a,{checked:v,onChange:function(e){return y(e.target.checked)},name:"private"})})}),Object(Q.jsx)(ft.a,{row:!0,children:Object(Q.jsx)(h.a,{variant:"contained",color:"primary",endIcon:Object(Q.jsx)(lt.a,{}),type:"submit",onClick:function(){return t({email:"max.mustermann@gmail.com",userid:1,token:"2dg638d3928h9283hd"})},children:"login"})})]})})})})};var vt=function(){var e=O(),t=e.userCredentials;return e.setUserCredentials,Object(Q.jsxs)("div",{children:[Object(Q.jsx)("h1",{children:"Register View"}),Object(Q.jsxs)("h3",{children:["email: ",t.email]}),Object(Q.jsxs)("h3",{children:["token: ",t.token]}),Object(Q.jsx)(d.a,{container:!0,justify:"center",children:Object(Q.jsx)(gt,{})})]})},yt=n(199),kt=n(196),wt=Object(s.a)((function(e){return Object(Oe.a)({root:{"& > *":{margin:e.spacing(1)},marginLeft:"10px"},report:{padding:e.spacing(1),margin:e.spacing(1),maxWidth:"700px"}})}));var Ct=function(){var e=Object(r.useState)([{id:1,comment:{id:1,threadId:100,parentId:0,content:"Testerhfsdgghbfsgfsidgfdhgfdsgfgsgsdgdgsdssdgdgsgdfkahevhgfghahgdakgkhdgfghfkhdagfg",upvotes:5,downvotes:5},reason:"reason"}]),t=Object(i.a)(e,2),n=t[0],a=t[1];X.getReports().then((function(e){e.length>0&&a(e)}));var c=wt();return Object(Q.jsx)("div",{children:n.map((function(e){return Object(Q.jsxs)(u.a,{className:c.report,children:[Object(Q.jsx)(qe,{comment:e.comment,selectCallback:function(e){},reportCallback:function(e){},voteButtons:!1}),Object(Q.jsxs)("div",{className:c.root,children:[Object(Q.jsx)(ve.a,{variant:"body1",children:e.reason}),Object(Q.jsx)(h.a,{variant:"contained",color:"primary",startIcon:Object(Q.jsx)(kt.a,{}),onClick:function(){!function(e){X.handleReport(e.id,"ban")}(e)},children:"Ban user"}),Object(Q.jsx)(h.a,{variant:"contained",color:"secondary",startIcon:Object(Q.jsx)(Ve.a,{}),onClick:function(){!function(e){X.handleReport(e.id,"ignore")}(e)},children:"Dismiss"})]})]})}))})},Tt=Object(it.a)({palette:{type:"dark",primary:{light:"#ffe54c",main:"#ffb300",dark:"#c68400",contrastText:"#000"},secondary:{light:"#8bf6ff",main:"#4fc3f7",dark:"#0093c4",contrastText:"#000"}}}),It=Object(s.a)((function(e){return Object(Oe.a)({title:{flexGrow:1}})}));var St=function(){var e=a.a.useState({email:"",userid:0,token:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=It();return Object(Q.jsxs)(st.a,{theme:Tt,children:[Object(Q.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(Q.jsx)(ot.a,{children:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("nav",{children:Object(Q.jsxs)("ul",{children:[Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/",children:"MapView"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/login",children:"LoginView"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/history",children:"HistoryView"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/thread",children:"ThreadView"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/register",children:"RegisterView"})}),Object(Q.jsx)("li",{children:Object(Q.jsx)(ot.b,{to:"/report",children:"ReportView"})})]})}),Object(Q.jsx)(Qe.a,{position:"static",children:Object(Q.jsxs)(ut.a,{children:[Object(Q.jsx)(Me.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(Q.jsx)(yt.a,{})}),Object(Q.jsx)(ve.a,{variant:"h6",className:c.title,children:"Title"}),Object(Q.jsx)(Me.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",href:"/login",children:Object(Q.jsx)(b.a,{})})]})}),Object(Q.jsx)(x.Provider,{value:{userCredentials:n,setUserCredentials:r},children:Object(Q.jsxs)(Z.c,{children:[Object(Q.jsx)(Z.a,{path:"/login",children:Object(Q.jsx)($,{})}),Object(Q.jsx)(Z.a,{path:"/history",children:Object(Q.jsx)(Fe,{})}),Object(Q.jsx)(Z.a,{path:"/thread",children:Object(Q.jsx)(ct,{thread:{id:1,title:"Title",description:"dfsah[img:http://http.cat/201]",location:{lat:1,lng:2}}})}),Object(Q.jsx)(Z.a,{path:"/register",children:Object(Q.jsx)(vt,{})}),Object(Q.jsx)(Z.a,{path:"/report",children:Object(Q.jsx)(Ct,{})}),Object(Q.jsx)(Z.a,{path:"/",children:Object(Q.jsx)(me,{})})]})})]})})]})},Et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(St,{})}),document.getElementById("root")),Et()}},[[133,1,2]]]);
//# sourceMappingURL=main.e44bb982.chunk.js.map